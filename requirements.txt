# Main Python Dependencies for College WhatsApp Bot
# Ensure compatibility with runtime.txt (Python 3.11)

# Web Framework & ASGI Server
fastapi==0.109.0
uvicorn[standard]==0.27.0 # Includes uvloop, httptools for performance

# Environment Variable Management
python-dotenv==1.0.1

# WhatsApp Integration
twilio==8.11.0

# Database & Supabase Client
# Updated to a version potentially more compatible with underlying dependencies to fix 'proxy' error
supabase>=2.8.0 # Use a newer, stable version
# psycopg2-binary is often needed by Supabase client or for raw SQL connections
# Using a version constraint to get a pre-compiled wheel suitable for Linux (Railway)
psycopg2-binary>=2.9.9

# AI & Machine Learning / RAG
groq==0.4.1
# Langchain (optional, might be used for complex RAG chains, but direct ChromaDB use is also possible)
# langchain==0.1.6
chromadb==0.4.22
sentence-transformers==2.3.1

# Monitoring & Error Tracking
sentry-sdk[fastapi]==1.40.0

# Dashboard & Data Visualization (if using FastAPI dashboard)
plotly==5.18.0
pandas==2.2.0

# Utilities
python-multipart==0.0.6 # Required for file uploads if needed
# Updated httpx constraint to be compatible with newer supabase ecosystem
# Supabase 2.3.4 might have had specific requirements, newer versions likely need newer httpx
httpx>=0.27.0 # Use a version compatible with the updated supabase
pydantic==2.5.3 # Data validation and settings management
toml==0.10.2 # For parsing TOML files if needed (e.g., config)

# Text Processing & Security
bleach==6.1.0 # For HTML sanitization in response enhancer
phonenumbers==8.13.28 # For phone number formatting/validation

# For Testing (if not in a separate test requirements file)
pytest==8.0.0
pytest-asyncio==0.23.3
# Use httpx for making requests in tests, often alongside TestClient
# The FastAPI TestClient is usually imported from fastapi.testclient, not as a separate package
# Example usage in tests:
# from fastapi.testclient import TestClient
# client = TestClient(app) # where app is your FastAPI instance

# Document Processing for RAG (Updated - Recommended: Use the maintained fork)
pypdf>=4.0.0 # Use the maintained fork of PyPDF2
# Alternative: If you must stick with PyPDF2 (archived)
# PyPDF2==3.0.1
python-docx>=1.1.0 # For DOCX text extraction in document loader

# SQLAlchemy (Added for Sentry Integration - SqlalchemyIntegration)
sqlalchemy>=2.0.0

# Example: If you decide to switch from PyPDF2 to pypdf, remove the PyPDF2 line above
# pypdf>=4.0.0